/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./ExtensionBase","./AccessibilityRender","../utils/TableUtils","../library","sap/ui/core/ControlBehavior","sap/ui/core/Element","sap/ui/thirdparty/jquery"],function(e,t,o,i,a,n,jQuery){"use strict";const l=i.SelectionMode;const r=o.CELLTYPE;const s={getAccInfoOfControl:function(e){let t=null;if(e&&typeof e.getAccessibilityInfo==="function"){if(typeof e.getVisible==="function"&&!e.getVisible()){t=s._normalize({})}else{const o=e.getAccessibilityInfo();if(o){const e={};s._flatten(o,e);t=e}}if(t&&!t.description){t.description=o.getResourceText("TBL_CTRL_STATE_EMPTY")}}return t},_normalize:function(e){if(!e){return null}if(e._normalized){return e}e.role=e.role||"";e.type=e.type||"";e.description=e.description||"";e.enabled=e.enabled===true||e.enabled===false?e.enabled:null;e.editable=e.editable===true||e.editable===false?e.editable:null;e.children=e.children||[];e._normalized=true;return e},_flatten:function(e,t,o){o=o?o:0;s._normalize(e);if(o===0){s._normalize(t);t._descriptions=[]}t._descriptions.push(s._getFullDescription(e));e.children.forEach(function(e){if(!e.getAccessibilityInfo||e.getVisible&&!e.getVisible()){return}const i=e.getAccessibilityInfo();if(i){s._flatten(i,t,o+1)}});if(o===0){t.description=t._descriptions.join(" ").trim();t._descriptions=undefined}},_getFullDescription:function(e){let t=e.type+" "+e.description;if(e.enabled===false){t=t+" "+o.getResourceText("TBL_CTRL_STATE_DISABLED")}else if(e.editable===false){t=t+" "+o.getResourceText("TBL_CTRL_STATE_READONLY")}else if(e.required===true){t=t+" "+o.getResourceText("TBL_CTRL_STATE_REQUIRED")}return t.trim()}};const c={getColumnIndexOfFocusedCell:function(e){const t=e.getTable();const i=o.getFocusedItemInfo(t);return i.cellInRow-(o.hasRowHeader(t)?1:0)},getInfoOfFocusedCell:function(e){const t=e.getTable();const i=t._getItemNavigation();const a=t.getDomRef();if(!e.getAccMode()||!a||!i){return null}const n=i.getFocusedDomRef();if(!n||n!==document.activeElement){return null}return o.getCellInfo(n)},getRelevantColumnHeaders:function(e,t){const i=[];if(!e||!t||!e.getColumnHeaderVisible()){return i}const a=o.getHeaderRowCount(e);if(a>0){const n=t.getId();i.push(n);for(let e=1;e<a;e++){i.push(n+"_"+e)}const l=o.Column.getParentSpannedColumns(e,n);if(l&&l.length){for(let e=0;e<l.length;e++){const t=l[e].level;const o=l[e].column.getId();i[t]=t===0?o:o+"_"+t}}}return i},isHiddenCell:function(e,t){const i=o.Grouping.isInGroupHeaderRow(e);const a=o.Grouping.isInSummaryRow(e);const n=!!t&&!!t.hasStyleClass;const l=e.parent().hasClass("sapUiTableRowHidden");const r=e.hasClass("sapUiTableCellHidden");const s=i&&n&&t.hasStyleClass("sapUiAnalyticalTableGroupCellHidden");const c=a&&n&&t.hasStyleClass("sapUiAnalyticalTableSumCellHidden");return l||r||s||c},isTreeColumnCell:function(e,t){return o.Grouping.isInTreeMode(e.getTable())&&t.hasClass("sapUiTableCellFirst")},getColumnTooltip:function(e){if(!e){return null}const t=e.getLabel();function i(e){if(!e){return false}const o=t&&t.getText?t.getText():"";return e===o}let a=e.getTooltip_AsString();if(!i(a)){return a}if(o.isA(t,"sap.ui.core.Control")){a=t.getTooltip_AsString()}if(!i(a)){return a}return null},getGridSize:function(e){const t=o.hasRowHeader(e);const i=o.hasRowActions(e);const a=o.getVisibleColumnCount(e)+(t?1:0)+(i?1:0);const n=o.isNoDataVisible(e)?0:Math.max(e._getTotalRowCount(),e._getRowCounts()._fullsize);return{columnCount:a,rowCount:o.getHeaderRowCount(e)+n}},getRowIndex:function(e){return e.getIndex()+1+o.getHeaderRowCount(e.getTable())},updateRowColCount:function(e){const t=e.getTable();const i=t._getItemNavigation();let a=false;let n=false;let l=false;const r=o.hasRowHeader(t);if(i){const i=c.getColumnIndexOfFocusedCell(e)+1+(r?1:0);const s=t.getRows()[o.getRowIndexOfFocusedCell(t)];const u=s?c.getRowIndex(s):0;const d=c.getGridSize(t);a=e._iLastRowNumber!==u||e._iLastRowNumber===u&&e._iLastColumnNumber===i;n=e._iLastColumnNumber!==i;l=e._iLastRowNumber==null&&e._iLastColumnNumber==null;t.$("rownumberofrows").text(a&&u>0?o.getResourceText("TBL_ROW_ROWCOUNT",[u,d.rowCount]):".");t.$("colnumberofcols").text(n?o.getResourceText("TBL_COL_COLCOUNT",[i,d.columnCount]):".");t.$("ariacount").text(l?o.getResourceText("TBL_DATA_ROWS_COLS",[d.rowCount,d.columnCount]):".");e._iLastRowNumber=u;e._iLastColumnNumber=i}return{rowChange:a,colChange:n,initial:l}},cleanupCellModifications:function(e){if(e._cleanupInfo){e._cleanupInfo.cell.attr(e._cleanupInfo.attr);e._cleanupInfo=null}},storeDefaultsBeforeCellModifications:function(e,t,o,i){e._cleanupInfo={cell:t,attr:{"aria-labelledby":o&&o.length?o.join(" "):null,"aria-describedby":i&&i.length?i.join(" "):null}}},performCellModifications:function(e,t,i,a,n,r,s,u){c.storeDefaultsBeforeCellModifications(e,t,i,a);const d=c.updateRowColCount(e);const f=e.getTable();f.$("cellacc").text(s||".");if(u){u(n,r,d.rowChange,d.colChange,d.initial)}let E="";if(d.initial){E=f.getId()+"-ariacount";if(f.getSelectionMode()!==l.None){E=E+" "+f.getId()+"-ariaselection"}}if(n&&n.length){E=E+" "+n.join(" ")}if(d.initial||d.rowChange){if(o.hasRowNavigationIndicators(f)){const e=o.getCellInfo(t);if(e.type!==o.CELLTYPE.COLUMNHEADER&&e.type!==o.CELLTYPE.COLUMNROWHEADER){const t=f.getRows()[e.rowIndex].getAggregation("_settings");if(t.getNavigated()){E=E+" "+f.getId()+"-rownavigatedtext"}}}}t.attr({"aria-labelledby":E?E:null,"aria-describedby":r&&r.length?r.join(" "):null})},modifyAccOfDATACELL:function(e){const t=this.getTable();const i=t.getId();const a=t._getItemNavigation();if(!a){return}const n=jQuery(e.cell);const l=o.getRowIndexOfFocusedCell(t);const r=c.getColumnIndexOfFocusedCell(this);const d=o.getRowColCell(t,l,r,false);let f=null;const E=d.row;const g=E.getId();const T=c.isHiddenCell(n,d.cell);const p=c.isTreeColumnCell(this,n);const b=c.getAriaAttributesFor(this,u.ELEMENTTYPES.DATACELL,{index:r,column:d.column,fixed:o.isFixedColumn(t,r)})["aria-labelledby"]||[];const h=[];let C=[i+"-rownumberofrows",i+"-colnumberofcols"];const R=E.isGroupHeader();const A=E.isSummary();if(R){C.push(i+"-ariarowgrouplabel")}else if(E.isTotalSummary()){C.push(i+"-ariagrandtotallabel")}else if(E.isGroupSummary()){C.push(i+"-ariagrouptotallabel")}if(o.hasRowHighlights(t)&&!R&&!A){C.push(g+"-highlighttext")}C=C.concat(b);if(!T){f=s.getAccInfoOfControl(d.cell);C.push(f?i+"-cellacc":d.cell.getId());if(o.getInteractiveElements(n)!==null){C.push(i+"-toggleedit")}}let L=f?f.description:".";if(p&&!T){const e=c.getAriaAttributesFor(this,u.ELEMENTTYPES.TREEICON,{row:d.row});if(e&&e["aria-label"]){L=e["aria-label"]+" "+L}}c.performCellModifications(this,n,b,null,C,h,L,function(e,i,a,l){if(R&&a){e.splice(3,0,g+"-groupHeader")}const r=n.find(".sapUiTableTreeIcon").not(".sapUiTableTreeIconLeaf").length===1;if((r||R)&&(a||l)){i.push(t.getId()+(!E.isExpanded()?"-rowexpandtext":"-rowcollapsetext"))}else if(!T&&!R&&!A&&o.isRowSelectionAllowed(t)&&a){e.push(g+"-rowselecttext")}})},modifyAccOfROWHEADER:function(e){const t=this.getTable();const i=t.getId();const a=jQuery(e.cell);const n=t.getRows()[e.rowIndex];const l=n.getId();const r=c.getAriaAttributesFor(this,u.ELEMENTTYPES.ROWHEADER)["aria-labelledby"]||[];const s=r.concat([i+"-rownumberofrows",i+"-colnumberofcols"]);if(!n.isSummary()&&!n.isGroupHeader()&&!n.isContentHidden()){s.push(l+"-rowselecttext");if(o.hasRowHighlights(t)){s.push(l+"-highlighttext")}}if(n.isGroupHeader()){s.push(i+"-ariarowgrouplabel");s.push(l+"-groupHeader");s.push(i+(n.isExpanded()?"-rowcollapsetext":"-rowexpandtext"))}if(n.isTotalSummary()){s.push(i+"-ariagrandtotallabel")}else if(n.isGroupSummary()){s.push(i+"-ariagrouptotallabel")}c.performCellModifications(this,a,r,null,s,null,null)},modifyAccOfCOLUMNHEADER:function(e){const t=this.getTable();const i=jQuery(e.cell);const a=n.getElementById(i.attr("data-sap-ui-colid"));const l=o.Column.getHeaderLabel(a);const r=c.getAriaAttributesFor(this,u.ELEMENTTYPES.COLUMNHEADER,{headerId:i.attr("id"),column:a,index:i.attr("data-sap-ui-colindex")});const s=c.getColumnTooltip(a);const d=[t.getId()+"-colnumberofcols"].concat(r["aria-labelledby"]);const f=e.columnSpan;if(l?.getRequired?.()){d.push(t.getId()+"-ariarequired")}if(f>1){d.push(t.getId()+"-ariacolspan");t.$("ariacolspan").text(o.getResourceText("TBL_COL_DESC_SPAN",[""+f]))}if(s){d.push(t.getId()+"-cellacc")}if(f<=1&&a&&a.getFiltered()){d.push(t.getId()+"-ariacolfiltered")}c.performCellModifications(this,i,r["aria-labelledby"],r["aria-describedby"],d,r["aria-describedby"],s)},modifyAccOfCOLUMNROWHEADER:function(e){const t=this.getTable();const o=jQuery(e.cell);const i=o.hasClass("sapUiTableSelAllVisible");const a=c.getAriaAttributesFor(this,u.ELEMENTTYPES.COLUMNROWHEADER,{enabled:i,checked:i&&!t.$().hasClass("sapUiTableSelAll")});const n=[t.getId()+"-colnumberofcols"].concat(a["aria-labelledby"]);c.performCellModifications(this,o,a["aria-labelledby"],a["aria-describedby"],n,a["aria-describedby"],null)},modifyAccOfROWACTION:function(e){const t=this.getTable();const i=t.getId();const a=jQuery(e.cell);const n=t.getRows()[e.rowIndex];const l=n.getId();const r=c.isHiddenCell(a);const s=c.getAriaAttributesFor(this,u.ELEMENTTYPES.ROWACTION)["aria-labelledby"]||[];const d=[i+"-rownumberofrows",i+"-colnumberofcols"].concat(s);const f=[];const E=n.isGroupHeader();if(E){d.push(i+"-ariarowgrouplabel");d.push(i+(n.isExpanded()?"-rowcollapsetext":"-rowexpandtext"))}if(n.isTotalSummary()){d.push(i+"-ariagrandtotallabel")}else if(n.isGroupSummary()){d.push(i+"-ariagrouptotallabel")}if(o.hasRowHighlights(t)&&!n.isGroupHeader()&&!n.isSummary()){d.push(l+"-highlighttext")}let g="";if(!r){const e=n.getRowAction();if(e){const t=e.getAccessibilityInfo();if(t){d.push(i+"-cellacc");g=t.description;if(o.getInteractiveElements(a)!==null){f.push(i+"-toggleedit")}}}}c.performCellModifications(this,a,s,[],d,f,g,function(e,t,o){if(E&&o){const t=e.indexOf(i+"-ariarowgrouplabel")+1;e.splice(t,0,l+"-groupHeader")}})},getAriaAttributesFor:function(e,t,i){let a={};const n=e.getTable();const r=n.getId();function s(e,t,i,n){let l="";if(i&&n){l="overlay,nodata"}else if(i&&!n){l="overlay"}else if(!i&&n){l="nodata"}let r=false;if(i&&e.getShowOverlay()||n&&o.isNoDataVisible(e)){r=true}if(r){a["aria-hidden"]="true"}if(l){a["data-sap-ui-table-acc-covered"]=l}}switch(t){case u.ELEMENTTYPES.COLUMNROWHEADER:{const e=n._getSelectionPlugin().getRenderConfig();if(e.headerSelector.visible){if(e.headerSelector.type==="toggle"){a["role"]=["checkbox"];if(i&&i.enabled){a["aria-checked"]=i.checked?"true":"false"}}else if(e.headerSelector.type==="custom"){a["role"]=["button"];if(!i||!i.enabled){a["aria-disabled"]="true"}}}break}case u.ELEMENTTYPES.ROWHEADER:a["role"]="gridcell";a["aria-colindex"]=1;if(o.hasRowHeader(n)&&n.getSelectionMode()===l.None){a["aria-labelledby"]=[r+"-rowselecthdr"]}break;case u.ELEMENTTYPES.ROWACTION:a["role"]="gridcell";a["aria-colindex"]=o.getVisibleColumnCount(n)+1+(o.hasRowHeader(n)?1:0);a["aria-labelledby"]=[r+"-rowacthdr"];break;case u.ELEMENTTYPES.COLUMNHEADER:{const e=i&&i.column;const t=i&&i.colspan;a["role"]="columnheader";a["aria-colindex"]=i.index+1+(o.hasRowHeader(n)?1:0);let l=[];if(i&&i.headerId){const t=c.getRelevantColumnHeaders(n,e);const o=t.indexOf(i.headerId);l=o>0?t.slice(0,o+1):[i.headerId]}for(let e=0;e<l.length;e++){l[e]=l[e]+"-inner"}a["aria-labelledby"]=l;if(i&&i.index<n.getComputedFixedColumnCount()){a["aria-labelledby"].push(r+"-ariafixedcolumn")}if(!t&&e){a["aria-sort"]=e.getSortOrder().toLowerCase();if(!e.getSorted()){a["aria-sort"]="none"}}if(!t&&e){const t=e.getHeaderMenuInstance();if(t){const e=t.getAriaHasPopupType();if(e!=="None"){a["aria-haspopup"]=e.toLowerCase()}}if(!t&&e._menuHasItems()){a["aria-haspopup"]="menu"}}break}case u.ELEMENTTYPES.DATACELL:{a["role"]="gridcell";a["aria-colindex"]=i.index+1+(o.hasRowHeader(n)?1:0);if(i.column){const e=c.getRelevantColumnHeaders(n,i.column);for(let t=0;t<e.length;t++){e[t]=e[t]+"-inner"}if(i&&i.fixed){e.push(r+"-ariafixedcolumn")}a["aria-labelledby"]=e}break}case u.ELEMENTTYPES.ROOT:break;case u.ELEMENTTYPES.TABLE:a["role"]="presentation";s(n,a,true,true);break;case u.ELEMENTTYPES.CONTAINER:break;case u.ELEMENTTYPES.CONTENT:{a["role"]=o.Grouping.isInGroupMode(n)||o.Grouping.isInTreeMode(n)?"treegrid":"grid";a["aria-labelledby"]=[].concat(n.getAriaLabelledBy());if(n.getTitle()){a["aria-labelledby"].push(n.getTitle().getId())}if(n.getSelectionMode()===l.MultiToggle){a["aria-multiselectable"]="true"}const e=n._getRowCounts();const t=o.hasFixedColumns(n);const i=e.fixedTop>0;const s=e.fixedBottom>0;const u=o.hasRowHeader(n);const d=o.hasRowActions(n);const f=c.getGridSize(n);a["aria-owns"]=[r+"-table"];if(t){a["aria-owns"].push(r+"-table-fixed")}if(i){a["aria-owns"].push(r+"-table-fixrow");if(t){a["aria-owns"].push(r+"-table-fixed-fixrow")}}if(s){a["aria-owns"].push(r+"-table-fixrow-bottom");if(t){a["aria-owns"].push(r+"-table-fixed-fixrow-bottom")}}if(u){a["aria-owns"].push(r+"-sapUiTableRowHdrScr")}if(d){a["aria-owns"].push(r+"-sapUiTableRowActionScr")}a["aria-rowcount"]=f.rowCount;a["aria-colcount"]=f.columnCount;if(n.isA("sap.ui.table.AnalyticalTable")){a["aria-roledescription"]=o.getResourceText("TBL_ANALYTICAL_TABLE_ROLE_DESCRIPTION")}break}case u.ELEMENTTYPES.TABLEHEADER:a["role"]="heading";a["aria-level"]="2";s(n,a,true,false);break;case u.ELEMENTTYPES.COLUMNHEADER_TBL:a["role"]="presentation";break;case u.ELEMENTTYPES.COLUMNHEADER_ROW:a["role"]="row";s(n,a,true,false);break;case u.ELEMENTTYPES.CREATIONROW_TBL:a["role"]="presentation";break;case u.ELEMENTTYPES.CREATIONROW:a["role"]="form";a["aria-labelledby"]=i.creationRow.getId()+"-label";s(n,a,true,false);break;case u.ELEMENTTYPES.ROWHEADER_COL:s(n,a,true,true);break;case u.ELEMENTTYPES.TH:a["role"]="presentation";a["scope"]="col";a["aria-hidden"]="true";break;case u.ELEMENTTYPES.TR:a["role"]="row";if(i.rowNavigated){a["aria-current"]=true}if(!i.fixedCol){a["aria-owns"]=[];if(o.hasRowHeader(n)){a["aria-owns"].push(r+"-rowsel"+i.index)}if(o.hasFixedColumns(n)){for(let e=0;e<n.getComputedFixedColumnCount();e++){a["aria-owns"].push(r+"-rows-row"+i.index+"-col"+e)}}if(o.hasRowActions(n)){a["aria-owns"].push(r+"-rowact"+i.index)}}break;case u.ELEMENTTYPES.TREEICON:if(o.Grouping.isInTreeMode(n)){a={"aria-label":"",title:"",role:""};if(n.getBinding()){if(i&&i.row){if(i.row.isExpandable()){const e=o.getResourceText("TBL_COLLAPSE_EXPAND");a["title"]=e;a["aria-expanded"]=""+!!i.row.isExpanded();a["aria-hidden"]="false";a["role"]="button"}else{a["aria-label"]=o.getResourceText("TBL_LEAF");a["aria-hidden"]="true"}}}}break;case u.ELEMENTTYPES.NODATA:{const e=o.getNoContentMessage(n);const t=[];a["role"]="gridcell";if(o.isA(e,"sap.ui.core.Control")){if(e.getAccessibilityReferences instanceof Function){const o=e.getAccessibilityReferences();t.push(o.title);t.push(o.description)}else{t.push(e.getId())}}else{t.push(r+"-noDataMsg")}a["aria-labelledby"]=t;s(n,a,true,false);break}case u.ELEMENTTYPES.OVERLAY:a["role"]="region";a["aria-labelledby"]=[].concat(n.getAriaLabelledBy());if(n.getTitle()){a["aria-labelledby"].push(n.getTitle().getId())}a["aria-labelledby"].push(r+"-ariainvalid");break;case u.ELEMENTTYPES.TABLEFOOTER:case u.ELEMENTTYPES.TABLESUBHEADER:s(n,a,true,false);break;case u.ELEMENTTYPES.ROWACTIONHEADER:a["aria-hidden"]="true";break;case"PRESENTATION":a["role"]="presentation";break}return a}};const u=e.extend("sap.ui.table.extensions.Accessibility",{_init:function(i,n,l){this._accMode=a.isAccessibilityEnabled();this._busyCells=[];o.addDelegate(i,this);e.enrich(i,t);return"AccExtension"},_attachEvents:function(){o.Hook.register(this.getTable(),o.Hook.Keys.Table.TotalRowCountChanged,this._updateAriaRowCount,this)},_detachEvents:function(){o.Hook.deregister(this.getTable(),o.Hook.Keys.Table.TotalRowCountChanged,this._updateAriaRowCount,this)},_debug:function(){this._ExtensionHelper=c;this._ACCInfoHelper=s},destroy:function(){this.getTable().removeEventDelegate(this);this._busyCells=[];e.prototype.destroy.apply(this,arguments)},getAriaAttributesFor:function(e,t){return c.getAriaAttributesFor(this,e,t)},onfocusin:function(e){const t=this.getTable();if(!t||o.getCellInfo(e.target).cell==null){return}if(t._mTimeouts._cleanupACCExtension){clearTimeout(t._mTimeouts._cleanupACCExtension);t._mTimeouts._cleanupACCExtension=null}this.updateAccForCurrentCell("Focus")},onfocusout:function(e){const t=this.getTable();if(!t){return}t._mTimeouts._cleanupACCExtension=setTimeout(function(){const e=this.getTable();if(!e){return}this._iLastRowNumber=null;this._iLastColumnNumber=null;c.cleanupCellModifications(this);e._mTimeouts._cleanupACCExtension=null}.bind(this),100)}});u.ELEMENTTYPES={DATACELL:"DATACELL",COLUMNHEADER:"COLUMNHEADER",ROWHEADER:"ROWHEADER",ROWACTION:"ROWACTION",COLUMNROWHEADER:"COLUMNROWHEADER",ROOT:"ROOT",CONTAINER:"CONTAINER",CONTENT:"CONTENT",TABLE:"TABLE",TABLEHEADER:"TABLEHEADER",TABLEFOOTER:"TABLEFOOTER",TABLESUBHEADER:"TABLESUBHEADER",COLUMNHEADER_TBL:"COLUMNHEADER_TABLE",COLUMNHEADER_ROW:"COLUMNHEADER_ROW",CREATIONROW_TBL:"CREATIONROW_TABLE",CREATIONROW:"CREATIONROW",ROWHEADER_COL:"ROWHEADER_COL",TH:"TH",TR:"TR",TREEICON:"TREEICON",ROWACTIONHEADER:"ROWACTIONHEADER",NODATA:"NODATA",OVERLAY:"OVERLAY"};u.prototype.getAccMode=function(){return this._accMode};u.prototype._updateAriaRowIndices=function(){if(!this._accMode){return}const e=this.getTable();const t=e.getRows();let o;let i;let a;for(i=0;i<t.length;i++){o=t[i];a=o.getDomRefs(true);a.row.not(a.rowHeaderPart).not(a.rowActionPart).attr("aria-rowindex",c.getRowIndex(o))}};u.prototype._updateAriaRowCount=function(){const e=this.getTable();const t=e.$("sapUiTableGridCnt");if(t){t.attr("aria-rowcount",c.getGridSize(e).rowCount)}};u.prototype.updateAccForCurrentCell=function(e){if(!this._accMode||!this.getTable()._getItemNavigation()){return}if(e==="Focus"||e===o.RowsUpdateReason.Expand||e===o.RowsUpdateReason.Collapse){c.cleanupCellModifications(this)}const t=c.getInfoOfFocusedCell(this);let i;if(!t||!t.isOfType(r.ANY)){return}if(t.isOfType(r.DATACELL)){i=u.ELEMENTTYPES.DATACELL}else if(t.isOfType(r.COLUMNHEADER)){i=u.ELEMENTTYPES.COLUMNHEADER}else if(t.isOfType(r.ROWHEADER)){i=u.ELEMENTTYPES.ROWHEADER}else if(t.isOfType(r.ROWACTION)){i=u.ELEMENTTYPES.ROWACTION}else if(t.isOfType(r.COLUMNROWHEADER)){i=u.ELEMENTTYPES.COLUMNROWHEADER}if(!c["modifyAccOf"+i]){return}if(e!=="Focus"&&e!==o.RowsUpdateReason.Expand&&e!==o.RowsUpdateReason.Collapse){if(t.isOfType(r.ANYCONTENTCELL)){t.cell.setAttribute("role","status");t.cell.setAttribute("role","gridcell")}else{return}}c["modifyAccOf"+i].apply(this,[t])};u.prototype.updateSelectionStateOfRow=function(e){if(!this._accMode){return}const t=e.getDomRefs(true);let o="";if(!e.isEmpty()&&!e.isGroupHeader()&&!e.isSummary()){const i=this.getKeyboardTexts();const a=this.getTable();const n=a._getSelectionPlugin().isSelected(e);if(t.row){t.row.not(t.rowHeaderPart).not(t.rowActionPart).add(t.row.children(".sapUiTableCell")).attr("aria-selected",n?"true":"false")}o=n?i.rowDeselect:i.rowSelect}if(t.rowSelectorText){t.rowSelectorText.text(o)}};u.prototype.updateAriaExpandAndLevelState=function(e){if(!this._accMode){return}const t=e.getDomRefs(true);const o=t.row.find(".sapUiTableTreeIcon");t.row.not(t.rowHeaderPart).not(t.rowActionPart).attr({"aria-expanded":e.isExpandable()?e.isExpanded()+"":null,"aria-level":e.getLevel()});if(o){o.attr(c.getAriaAttributesFor(this,u.ELEMENTTYPES.TREEICON,{row:e}))}};u.prototype.updateAriaStateOfRowHighlight=function(e){if(!this._accMode||!e){return}const t=e._getRow();const o=t?t.getDomRef("highlighttext"):null;if(o){o.innerText=e._getHighlightText()}};u.prototype._updateAriaStateOfNavigatedRow=function(e){if(!this._accMode||!e){return}const t=e._getRow();const o=e.getNavigated();t.getDomRefs(true).row.attr("aria-current",o?true:null)};u.prototype.updateAriaStateForOverlayAndNoData=function(){const e=this.getTable();if(!e||!e.getDomRef()||!this._accMode){return}if(e.getShowOverlay()){e.$().find("[data-sap-ui-table-acc-covered*='overlay']").attr("aria-hidden","true")}else{e.$().find("[data-sap-ui-table-acc-covered*='overlay']").removeAttr("aria-hidden");if(o.isNoDataVisible(e)){e.$().find("[data-sap-ui-table-acc-covered*='nodata']").attr("aria-hidden","true")}else{e.$().find("[data-sap-ui-table-acc-covered*='nodata']").removeAttr("aria-hidden")}}};u.prototype.getKeyboardTexts=function(){const e=this.getTable().getSelectionMode();const t={rowSelect:"",rowDeselect:""};if(e===l.None){return t}t.rowSelect=o.getResourceText("TBL_ROW_SELECT_KEY");t.rowDeselect=o.getResourceText("TBL_ROW_DESELECT_KEY");return t};u.prototype.setSelectAllState=function(e){const t=this.getTable();if(this._accMode&&t){t.$("selall").attr("aria-checked",e?"true":"false")}};u.prototype.addColumnHeaderLabel=function(e,t){const o=this.getTable();if(!this._accMode||!t.getAriaLabelledBy||!o){return}let i=o.getColumnHeaderVisible()?e.getId():null;if(!i){const t=e.getAggregation("label");if(t){i=t.getId()}}const a=t.getAriaLabelledBy();if(i&&a.indexOf(i)<0){t.addAriaLabelledBy(i)}};return u});
//# sourceMappingURL=Accessibility.js.map