sap.ui.define(["./BaseController","sap/m/Dialog","sap/m/Button","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/ui/model/json/JSONModel"],function(t,e,o,a,s,n,r){"use strict";return t.extend("library.controller.Main",{model:{form:{},masterdata:{}},onInit:function(){this.setModel(new r(this.model));const t=new r(sap.ui.require.toUrl("library/data/books.json?x="+Math.random()));t.attachRequestCompleted(this._onDataLoaded.bind(this))},_onDataLoaded:function(t){const e=this.getModel();const o=t.getSource().getData();const a=[...new Set(o.map(t=>t.Author))].map(t=>({value:t}));const s=[...new Set(o.map(t=>t.State))].map(t=>({value:t}));const n=[...new Set(o.map(t=>t.Genre))].map(t=>({value:t}));e.setProperty("/allBooks",o);e.setProperty("/masterdata/authors",a);e.setProperty("/masterdata/states",s);e.setProperty("/masterdata/genres",n);e.setProperty("/books",o)},handleCleanSelected:function(){const t=this.getModel();const e=t.getProperty("/allBooks");t.setProperty("/form",{});t.setProperty("/books",e)},handleBookPress:function(t){const a=t.getSource().data("Image");const s=t.getSource().data("Title");this.oDefaultDialog=new e({title:s,contentAlign:"Center",content:new sap.m.Image({src:`./data/cover/${a}`,width:"300px"}),endButton:new o({text:"Close",press:function(){this.oDefaultDialog.close()}.bind(this)})});this.getView().addDependent(this.oDefaultDialog);this.oDefaultDialog.open()},handleSearchSelected:function(){const t=this.getModel();const e=t.getProperty("/form");const o=t.getProperty("/allBooks");const a=o.filter(t=>(!e.title||t.Title.includes(e.title))&&(!e.author||t.Author===e.author)&&(!e.state||t.State===e.state)&&(!e.genre||t.Genre===e.genre)&&(!e.readingDate||t.ReadingDate===e.readingDate));t.setProperty("/books",a)}})});
//# sourceMappingURL=Main.controller.js.map