sap.ui.define(["./BaseController","sap/m/Dialog","sap/m/Button","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/ui/model/json/JSONModel"],function(e,t,a,o,n,s,r){"use strict";return e.extend("library.controller.Main",{model:{form:{},masterdata:{}},onInit:function(){this.setModel(new r(this.model));const e=new r(sap.ui.require.toUrl("library/data/books.json?x="+Math.random()));e.attachRequestCompleted(this._onDataLoaded.bind(this))},_onDataLoaded:function(e){const t=this.getModel();const a=e.getSource().getData();const o=[...new Set(a.map(e=>e.Author))].map(e=>({value:e}));const n=[...new Set(a.map(e=>e.State))].map(e=>({value:e}));const s=[...new Set(a.map(e=>e.Genre))].map(e=>({value:e}));const r=[...new Set(a.map(e=>e.ReadingDate?new Date(e.ReadingDate).getFullYear():null).filter(e=>e))].map(e=>({value:e}));t.setProperty("/allBooks",a);t.setProperty("/masterdata/authors",o);t.setProperty("/masterdata/states",n);t.setProperty("/masterdata/genres",s);t.setProperty("/masterdata/years",r);t.setProperty("/books",a)},handleCleanSelected:function(){const e=this.getModel();const t=e.getProperty("/allBooks");e.setProperty("/form",{});e.setProperty("/books",t)},handleBookPress:function(e){const o=e.getSource().data("Image");const n=e.getSource().data("Title");this.oDefaultDialog=new t({title:n,contentAlign:"Center",content:new sap.m.Image({src:`./data/cover/${o}`,width:"300px"}),endButton:new a({text:"Close",press:function(){this.oDefaultDialog.close()}.bind(this)})});this.getView().addDependent(this.oDefaultDialog);this.oDefaultDialog.open()},handleSearchSelected:function(){const e=this.getModel();const t=e.getProperty("/form");const a=e.getProperty("/allBooks");const o=a.filter(e=>{const a=e.ReadingDate?new Date(e.ReadingDate).getFullYear():null;const o=t.readingYear?parseInt(t.readingYear,10):null;return(!t.title||e.Title.includes(t.title))&&(!t.author||e.Author===t.author)&&(!t.state||e.State===t.state)&&(!t.genre||e.Genre===t.genre)&&(!o||a===o)});e.setProperty("/books",o)}})});
//# sourceMappingURL=Main.controller.js.map